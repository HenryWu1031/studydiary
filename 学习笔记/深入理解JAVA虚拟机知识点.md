# 深入理解JAVA虚拟机知识点

## 第一章 走进JAVA

- 世界上并没有完美的程序，但我们并不因此沮丧，因为写程序本来就是一个不断追求完美的过程

### Java的特点

- 一次编写，到处运行
- 有相对安全的内存管理和访问机制
- 避免绝大部分的内存泄漏和指针越界问题
- 有完善的应用程序接口

## 第二章 Java内存区域与内存溢出异常

- Java与C++之间有一堵由内存动态分配和垃圾收集技术所围成的高墙，墙外面的人想进去，墙里面的人却想出来
- Java虚拟机运行时的数据区的组成如下：是由方法区、虚拟机栈、本地方法栈、堆和程序计数器组成

#### 程序计数器

- 程序计数器是一块较小的内存空间，它可以看作是当前线程所执行的字节码的行号指示器。

#### Java虚拟机栈

- Java虚拟机栈描述的是Java方法执行的线程内存模型：每个方法被执行的时候，Java虚拟机都会同步创建一个栈帧用于存储局部变量表、操作数栈、动态连接、方法出口等信息。每一个方法被调用直至执行完毕的过程，就对应着一个栈帧在虚拟机栈中从入栈到出栈的过程。

#### Java堆

- Java堆是虚拟机所管理的内存中最大的一块，Java堆是被所有线程共享的一块内存区域。

#### 方法区

方法区与Java堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类型信息、常量、静态变量、即时编译器编译后的代码缓存等数据。

#### 对象的创建

- 当Java虚拟机遇到一条字节码new指令时，首先将去检查这个指令的参数是否能在常量池中定位i到一个类的符号引用，并且检查这个符号引用代表的类是否已被加载、解析和初始化过。如果没有，那必须先执行相应的类加载过程，本书第七章将探讨这部分细节。
- 之后虚拟机将为新生对象分配内存

##### 指针碰撞

- Java堆中的内存是绝对规整的，所有被使用过的内存都被放在一边，空闲的内存被放在另一边，中间放着一个指针作为分界点的指示器，那所分配内存就仅仅是把那个指针向空闲空间方向挪动一段与对象大小相等的距离，这种分配方式被称为“指针碰撞”。